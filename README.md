# Word of wisdom with PoW 
Реализация TCP-сервера word-of-wisdom с защитой от DDoS на основе [proof of work](https://en.wikipedia.org/wiki/Proof_of_work) и клиента для него.

## Запуск
```
docker-compose up
```

## Протокол
Протокол клиент-серверного взаимодействия реализован поверх TCP с предельно аскетичным форматом. После установки соединения сервер отправляет 17 байт, первые 16 из которых - это UUID, используемый в качестве затравки для алгоритма PoW. Семнадцатый байт - число `uint8`, задающее сложность. В ответ на сообщение сервера клиент должен отправить 8 байт, соответствующих найденному `uint64` числу (порядок байт - little-endian). Если решение не проходит валидацию, сервер закрывает соединение. Если валидация пройдена, то сервер отправляет сообщение, содержащее случайно выбранную цитату, длинной до 1024 байт с символом перевода строки `0x0A` на конце, после чего закрывает соединение.  

## Алгоритм PoW
Алгоритм основан на вычислении хешей SHA-1 и поиске решений, удовлетворяющих заданным условиям - определенному количеству лидирующих нулевых битов. В качестве входных данных для хеширования выступает затравка, выдаваемая сервером, и случайное число `uint64`, искомое клиентом. Параметр сложности задает количество нулевых битов, по умолчанию равен 20. Хеш SHA-1 состоит из 160 бит, а значит при сложности 20 из 2<sup>160</sup> возможных значений хеша 2<sup>140</sup> удовлетворяют критерию. Вероятность найти решение 1 к 2<sup>20</sup>, значит в среднем надо совершить чуть более миллиона вычислений.
